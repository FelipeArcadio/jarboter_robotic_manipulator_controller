   1               		.file	"conversion.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
 228               	.global	rad2usteps
 230               	rad2usteps:
   1:C:/Jarboter_V_2_1/GUI/C/conversion.c **** #include <math.h>      
   2:C:/Jarboter_V_2_1/GUI/C/conversion.c **** #include "conversion.h"
   3:C:/Jarboter_V_2_1/GUI/C/conversion.c **** #ifdef _WIN32
   4:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	#define M_PI 3.141592653589793238462643	
   5:C:/Jarboter_V_2_1/GUI/C/conversion.c **** #endif
   6:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
   7:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
   8:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
   9:C:/Jarboter_V_2_1/GUI/C/conversion.c **** int32 positionPCtoUC(double f) 
  10:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
  11:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return (int32)floor(0.50+f);  // 32.0 format
  12:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } // positionPCtoUC
  13:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  14:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  15:C:/Jarboter_V_2_1/GUI/C/conversion.c **** // convert also from seconds to cycles
  16:C:/Jarboter_V_2_1/GUI/C/conversion.c **** int32 velocityPCtoUC(double f) 
  17:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
  18:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double temp=0;
  19:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
  20:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	temp=f*SAMPLETIME; //De segundos a sampletime 
  21:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	temp=0.50+65536.0*temp;
  22:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	temp=floor(temp);
  23:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return (int32)temp;  // 16.16 format
  24:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } // velocityPCtoUC
  25:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  26:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  27:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  28:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  29:C:/Jarboter_V_2_1/GUI/C/conversion.c **** // convert also from seconds to cycles
  30:C:/Jarboter_V_2_1/GUI/C/conversion.c **** int32 accelerationPCtoUC(double f) 
  31:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
  32:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double temp=0;
  33:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
  34:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	temp=f*SAMPLETIME*SAMPLETIME; //De segundos a sampletime 
  35:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	temp=0.50+(65536.0*temp);
  36:C:/Jarboter_V_2_1/GUI/C/conversion.c ****     temp=floor(temp);
  37:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return (int32)temp;  // 16.16 format
  38:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } // accelerationPCtoUC
  39:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  40:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  41:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  42:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  43:C:/Jarboter_V_2_1/GUI/C/conversion.c **** // convert angle in rad into microsteps
  44:C:/Jarboter_V_2_1/GUI/C/conversion.c **** double rad2usteps(tAxisSettings *paxisSettings, double rad) 
  45:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 231               	M0-.LFBB1
 232               	.LM0:
 233               	.LFBB1:
 234 0000 8F92      		push r8
 235 0002 9F92      		push r9
 236 0004 AF92      		push r10
 237 0006 BF92      		push r11
 238 0008 CF92      		push r12
 239 000a DF92      		push r13
 240 000c EF92      		push r14
 241 000e FF92      		push r15
 242 0010 0F93      		push r16
 243 0012 1F93      		push r17
 244               	/* prologue: function */
 245               	/* frame size = 0 */
 246 0014 6C01      		movw r12,r24
 247 0016 4A01      		movw r8,r20
 248 0018 5B01      		movw r10,r22
 250               	.LM1:
 251 001a FC01      		movw r30,r24
 252 001c 648D      		ldd r22,Z+28
 253 001e 758D      		ldd r23,Z+29
 254 0020 8827      		clr r24
 255 0022 77FD      		sbrc r23,7
 256 0024 8095      		com r24
 257 0026 982F      		mov r25,r24
 258 0028 0E94 0000 		call __floatsisf
 259 002c 7B01      		movw r14,r22
 260 002e 8C01      		movw r16,r24
 261 0030 F601      		movw r30,r12
 262 0032 668D      		ldd r22,Z+30
 263 0034 778D      		ldd r23,Z+31
 264 0036 8827      		clr r24
 265 0038 77FD      		sbrc r23,7
 266 003a 8095      		com r24
 267 003c 982F      		mov r25,r24
 268 003e 0E94 0000 		call __floatsisf
 269 0042 9B01      		movw r18,r22
 270 0044 AC01      		movw r20,r24
 271 0046 C801      		movw r24,r16
 272 0048 B701      		movw r22,r14
 273 004a 0E94 0000 		call __divsf3
 274 004e 7B01      		movw r14,r22
 275 0050 8C01      		movw r16,r24
 276 0052 C501      		movw r24,r10
 277 0054 B401      		movw r22,r8
 278 0056 2BED      		ldi r18,lo8(0x40c90fdb)
 279 0058 3FE0      		ldi r19,hi8(0x40c90fdb)
 280 005a 49EC      		ldi r20,hlo8(0x40c90fdb)
 281 005c 50E4      		ldi r21,hhi8(0x40c90fdb)
 282 005e 0E94 0000 		call __divsf3
 283 0062 9B01      		movw r18,r22
 284 0064 AC01      		movw r20,r24
 285 0066 C801      		movw r24,r16
 286 0068 B701      		movw r22,r14
 287 006a 0E94 0000 		call __mulsf3
 288 006e 4B01      		movw r8,r22
 289 0070 5C01      		movw r10,r24
 290 0072 F601      		movw r30,r12
 291 0074 6485      		ldd r22,Z+12
 292 0076 7585      		ldd r23,Z+13
 293 0078 8827      		clr r24
 294 007a 77FD      		sbrc r23,7
 295 007c 8095      		com r24
 296 007e 982F      		mov r25,r24
 297 0080 0E94 0000 		call __floatsisf
 298 0084 7B01      		movw r14,r22
 299 0086 8C01      		movw r16,r24
 300 0088 F601      		movw r30,r12
 301 008a 6285      		ldd r22,Z+10
 302 008c 7385      		ldd r23,Z+11
 303 008e 8827      		clr r24
 304 0090 77FD      		sbrc r23,7
 305 0092 8095      		com r24
 306 0094 982F      		mov r25,r24
 307 0096 0E94 0000 		call __floatsisf
 308 009a 9B01      		movw r18,r22
 309 009c AC01      		movw r20,r24
 310 009e C801      		movw r24,r16
 311 00a0 B701      		movw r22,r14
 312 00a2 0E94 0000 		call __mulsf3
 313 00a6 9B01      		movw r18,r22
 314 00a8 AC01      		movw r20,r24
 315 00aa C501      		movw r24,r10
 316 00ac B401      		movw r22,r8
 317 00ae 0E94 0000 		call __mulsf3
 318               	/* epilogue start */
  46:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double resul,x,y,z;
  47:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
  48:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	x=(double) paxisSettings->gearNominator/(double)paxisSettings->gearDenominator;
  49:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	y=(rad/(2*M_PI));
  50:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	z=(double)paxisSettings->motorStepsPerRevolution* (double)paxisSettings->ustepsPerStep;
  51:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	resul= x*y*z;
  52:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return resul; 
  53:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } // rad2usteps
 319               		pop r11
 320               		pop r10
 321 00b2 1F91      		pop r9
 322 00b4 0F91      		pop r8
 323 00b6 FF90      		ret
 325 00ba DF90      	.Lscope1:
 329 00c2 9F90      	.global	ustep2rad
 331 00c6 0895      	ustep2rad:
 333               	.LM3:
 334               	.LFBB2:
 335               		push r8
 336               		push r9
 337               		push r10
 338               		push r11
 339               		push r12
  54:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  55:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  56:C:/Jarboter_V_2_1/GUI/C/conversion.c **** // convert microsteps into angle in rad
  57:C:/Jarboter_V_2_1/GUI/C/conversion.c **** double ustep2rad(tAxisSettings *paxisSettings, double usteps) 
  58:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 340               	push r15
 341               		push r16
 342               		push r17
 343 00c8 8F92      	/* prologue: function */
 344 00ca 9F92      	/* frame size = 0 */
 345 00cc AF92      		movw r12,r24
 346 00ce BF92      		movw r18,r20
 347 00d0 CF92      		movw r20,r22
 349 00d4 EF92      	.LM4:
 350 00d6 FF92      		movw r24,r20
 351 00d8 0F93      		movw r22,r18
 352 00da 1F93      		call __addsf3
 353               		ldi r18,lo8(0x40490fdb)
 354               		ldi r19,hi8(0x40490fdb)
 355 00dc 6C01      		ldi r20,hlo8(0x40490fdb)
 356 00de 9A01      		ldi r21,hhi8(0x40490fdb)
 357 00e0 AB01      		call __mulsf3
 358               		movw r8,r22
 359               		movw r10,r24
 360 00e2 CA01      		movw r30,r12
 361 00e4 B901      		ldd r22,Z+30
 362 00e6 0E94 0000 		ldd r23,Z+31
 363 00ea 2BED      		clr r24
 364 00ec 3FE0      		sbrc r23,7
 365 00ee 49E4      		com r24
 366 00f0 50E4      		mov r25,r24
 367 00f2 0E94 0000 		call __floatsisf
 368 00f6 4B01      		movw r14,r22
 369 00f8 5C01      		movw r16,r24
 370 00fa F601      		movw r30,r12
 371 00fc 668D      		ldd r22,Z+28
 372 00fe 778D      		ldd r23,Z+29
 373 0100 8827      		clr r24
 374 0102 77FD      		sbrc r23,7
 375 0104 8095      		com r24
 376 0106 982F      		mov r25,r24
 377 0108 0E94 0000 		call __floatsisf
 378 010c 7B01      		movw r18,r22
 379 010e 8C01      		movw r20,r24
 380 0110 F601      		movw r24,r16
 381 0112 648D      		movw r22,r14
 382 0114 758D      		call __divsf3
 383 0116 8827      		movw r18,r22
 384 0118 77FD      		movw r20,r24
 385 011a 8095      		movw r24,r10
 386 011c 982F      		movw r22,r8
 387 011e 0E94 0000 		call __mulsf3
 388 0122 9B01      		movw r8,r22
 389 0124 AC01      		movw r10,r24
 390 0126 C801      		movw r30,r12
 391 0128 B701      		ldd r22,Z+10
 392 012a 0E94 0000 		ldd r23,Z+11
 393 012e 9B01      		clr r24
 394 0130 AC01      		sbrc r23,7
 395 0132 C501      		com r24
 396 0134 B401      		mov r25,r24
 397 0136 0E94 0000 		call __floatsisf
 398 013a 4B01      		movw r14,r22
 399 013c 5C01      		movw r16,r24
 400 013e F601      		movw r30,r12
 401 0140 6285      		ldd r22,Z+12
 402 0142 7385      		ldd r23,Z+13
 403 0144 8827      		clr r24
 404 0146 77FD      		sbrc r23,7
 405 0148 8095      		com r24
 406 014a 982F      		mov r25,r24
 407 014c 0E94 0000 		call __floatsisf
 408 0150 7B01      		movw r18,r22
 409 0152 8C01      		movw r20,r24
 410 0154 F601      		movw r24,r16
 411 0156 6485      		movw r22,r14
 412 0158 7585      		call __mulsf3
 413 015a 8827      		movw r18,r22
 414 015c 77FD      		movw r20,r24
 415 015e 8095      		ldi r22,lo8(0x3f800000)
 416 0160 982F      		ldi r23,hi8(0x3f800000)
 417 0162 0E94 0000 		ldi r24,hlo8(0x3f800000)
 418 0166 9B01      		ldi r25,hhi8(0x3f800000)
 419 0168 AC01      		call __divsf3
 420 016a C801      		movw r18,r22
 421 016c B701      		movw r20,r24
 422 016e 0E94 0000 		movw r24,r10
 423 0172 9B01      		movw r22,r8
 424 0174 AC01      		call __mulsf3
 425 0176 60E0      	/* epilogue start */
 427 017a 80E8      	.LM5:
 428 017c 9FE3      		pop r17
 429 017e 0E94 0000 		pop r16
 430 0182 9B01      		pop r15
 431 0184 AC01      		pop r14
 432 0186 C501      		pop r13
 433 0188 B401      		pop r12
 434 018a 0E94 0000 		pop r11
 435               		pop r10
  59:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double resul,x,y;
  60:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  61:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	x=(double)paxisSettings->gearDenominator/(double)paxisSettings->gearNominator;
  62:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	y=1/( (double)paxisSettings->ustepsPerStep*(double)paxisSettings->motorStepsPerRevolution );
  63:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	resul=usteps*2*M_PI*x*y;
  64:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return resul;
  65:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } // ustep2rad
 436               	,grados2rad
 438 018e 1F91      	.global	grados2rad
 440 0192 FF90      	grados2rad:
 442 0196 DF90      	.LM6:
 443 0198 CF90      	.LFBB3:
 444 019a BF90      	/* prologue: function */
 445 019c AF90      	/* frame size = 0 */
 447 01a0 8F90      	.LM7:
 448 01a2 0895      		ldi r18,lo8(0x3c8efa35)
 449               		ldi r19,hi8(0x3c8efa35)
 450               		ldi r20,hlo8(0x3c8efa35)
 451               		ldi r21,hhi8(0x3c8efa35)
 452               		call __mulsf3
 453               	/* epilogue start */
 455               	.LM8:
  66:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  67:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  68:C:/Jarboter_V_2_1/GUI/C/conversion.c **** double grados2rad(double deg)
  69:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 456               	ad, .-grados2rad
 457               	.Lscope3:
 460               	.global	rad2grados
 462               	rad2grados:
 464 01a6 3AEF      	.LM9:
 465 01a8 4EE8      	.LFBB4:
 466 01aa 5CE3      	/* prologue: function */
 467 01ac 0E94 0000 	/* frame size = 0 */
  70:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double rad;
  71:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  72:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	rad=deg*(M_PI/180);
  73:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return rad;
  74:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 469               	18,lo8(0x3c8efa35)
 470               		ldi r19,hi8(0x3c8efa35)
 471 01b0 0895      		ldi r20,hlo8(0x3c8efa35)
 472               		ldi r21,hhi8(0x3c8efa35)
 473               		call __divsf3
 474               	/* epilogue start */
 476               	.LM11:
 477               		ret
  75:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  76:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  77:C:/Jarboter_V_2_1/GUI/C/conversion.c **** double rad2grados(double rad)
  78:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 481               	.global	bcd2int
 483               	bcd2int:
 485               	.LM12:
 486 01b2 25E3      	.LFBB5:
 487 01b4 3AEF      	/* prologue: function */
 488 01b6 4EE8      	/* frame size = 0 */
 490 01ba 0E94 0000 	.LM13:
 491               		mov r18,r24
  79:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double grad;
  80:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  81:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	grad=rad/(M_PI/180);
  82:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return grad;
  83:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 492               	di r18,lo8(15)
 493               		ldi r25,lo8(10)
 494 01be 0895      		mul r18,r25
 495               		movw r18,r0
 496               		clr r1
 497               		andi r24,lo8(15)
 499               	.LM14:
 500               		add r24,r18
 501               	/* epilogue start */
  84:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  85:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  86:C:/Jarboter_V_2_1/GUI/C/conversion.c **** uint8 bcd2int(uint8 bcd_format)
  87:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 502               	e	bcd2int, .-bcd2int
 503               	.Lscope5:
 506               	.global	int2bcd
 508               	int2bcd:
 510 01c2 2295      	.LM15:
 511 01c4 2F70      	.LFBB6:
 512 01c6 9AE0      	/* prologue: function */
 513 01c8 299F      	/* frame size = 0 */
 514 01ca 9001      		mov r18,r24
 516 01ce 8F70      	.LM16:
  88:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	uint8 integer;
  89:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
  90:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	integer= (((bcd_format >>4)*10) + (bcd_format%16));
  91:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
  92:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return integer;
  93:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 517               	)
 518               		call __udivmodqi4
 519 01d0 820F      		mov r19,r24
 520               		swap r19
 521 01d2 0895      		andi r19,lo8(-16)
 522               		mov r24,r18
 523               		call __udivmodqi4
 525               	.LM17:
 526               		mov r24,r19
 527               		add r24,r25
 528               	/* epilogue start */
  94:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
  95:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
  96:C:/Jarboter_V_2_1/GUI/C/conversion.c **** uint8 int2bcd(uint8 integer)
  97:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 529               	int2bcd, .-int2bcd
 530               	.Lscope6:
 535               	.global	uPasosTOgradros
 537 01d6 6AE0      	uPasosTOgradros:
 539 01dc 382F      	.LM18:
 540 01de 3295      	.LFBB7:
 541 01e0 307F      		push r28
 542 01e2 822F      		push r29
 543 01e4 0E94 0000 	/* prologue: function */
  98:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	uint8 bcd_format;
  99:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 100:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	bcd_format= ((integer/10)<<4) + (integer%10);
 101:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 102:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return bcd_format;
 103:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 544               	 0 */
 545               		movw r28,r24
 547 01ea 890F      	.LM19:
 548               		cpi r18,1
 549 01ec 0895      		cpc r19,__zero_reg__
 550               		breq .L16
 551               		cpi r18,2
 552               		cpc r19,__zero_reg__
 553               		breq .L17
 554               		or r18,r19
 555               		breq .L15
 556               		ldi r22,lo8(0)
 557               		ldi r23,lo8(0)
 558               		ldi r24,lo8(-128)
 104:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 105:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*
 106:C:/Jarboter_V_2_1/GUI/C/conversion.c **** int32 gradosMotortouPasos(double grados) 
 107:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 108:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 109:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double resul,y;
 110:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 111:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 112:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	y=(double)paxisSettings->ustepsPerStep*(double)paxisSettings->motorStepsPerRevolution;
 113:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	resul=y/360;
 114:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return (int32)floor(0.50+resul);  // 32.0 format
 115:C:/Jarboter_V_2_1/GUI/C/conversion.c **** } 
 116:C:/Jarboter_V_2_1/GUI/C/conversion.c **** */
 117:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 118:C:/Jarboter_V_2_1/GUI/C/conversion.c **** //paxisSettings apuntador a las caracteristicas de la acticulacion a convertir. 
 119:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 120:C:/Jarboter_V_2_1/GUI/C/conversion.c **** /*****************************************************************************************/
 121:C:/Jarboter_V_2_1/GUI/C/conversion.c **** double uPasosTOgradros(tAxisSettings *paxisSettings,int32 Valor,int tipo)
 122:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 559               	5)
 560               		rjmp .L18
 561               	.L15:
 563 01f0 DF93      	.LM20:
 564               		movw r24,r22
 565               		movw r22,r20
 566 01f2 EC01      		call __floatsisf
 123:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 124:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double result,Data;
 125:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 126:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	result=-1;
 127:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 128:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	switch(tipo) 
 567               	0,r22
 568               		movw r22,r24
 569 01f4 2130      		movw r24,r28
 570 01f6 3105      		call ustep2rad
 571 01f8 01F0      		rjmp .L20
 572 01fa 2230      	.L16:
 574 01fe 01F0      	.LM21:
 575 0200 232B      		movw r24,r22
 576 0202 01F0      		movw r22,r20
 577 0204 60E0      		call __floatsisf
 578 0206 70E0      		ldi r18,lo8(0x3f000000)
 579 0208 80E8      		ldi r19,hi8(0x3f000000)
 580 020a 9FEB      		ldi r20,hlo8(0x3f000000)
 581 020c 00C0      		ldi r21,hhi8(0x3f000000)
 582               		call __subsf3
 129:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	{
 130:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case POSICION_TYPE:
 131:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Valor;
 132:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De uPasos A radianes*/
 133:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=ustep2rad(paxisSettings,(double)Data);
 583               	,.LM22-.LFBB7
 584               	.LM22:
 585 020e CB01      		ldi r18,lo8(0x37800000)
 586 0210 BA01      		ldi r19,hi8(0x37800000)
 587 0212 0E94 0000 		ldi r20,hlo8(0x37800000)
 588 0216 AB01      		ldi r21,hhi8(0x37800000)
 589 0218 BC01      		call __mulsf3
 591 021c 0E94 0000 	.LM23:
 592 0220 00C0      		ldi r18,lo8(0x3a1d4952)
 593               		ldi r19,hi8(0x3a1d4952)
 134:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De Radianes A grados*/
 135:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=rad2grados((double)result);
 136:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 137:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case VELOCIDAD_TYPE:
 138:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Valor-0.5;
 594               	o8(0x3a1d4952)
 595               		ldi r21,hhi8(0x3a1d4952)
 596 0222 CB01      		call __divsf3
 597 0224 BA01      		movw r20,r22
 598 0226 0E94 0000 		movw r22,r24
 599 022a 20E0      		movw r24,r28
 600 022c 30E0      		call ustep2rad
 601 022e 40E0      		rjmp .L20
 602 0230 5FE3      	.L17:
 139:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Data/65536.0;
 604               	vw r24,r22
 605               		movw r22,r20
 606 0236 20E0      		call __floatsisf
 607 0238 30E0      		ldi r18,lo8(0x3f000000)
 608 023a 40E8      		ldi r19,hi8(0x3f000000)
 609 023c 57E3      		ldi r20,hlo8(0x3f000000)
 610 023e 0E94 0000 		ldi r21,hhi8(0x3f000000)
 140:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Data/SAMPLETIME;
 141:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De uPasos A radianes*/
 142:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=ustep2rad(paxisSettings,(double)Data);
 611               	_subsf3
 613 0242 22E5      	.LM25:
 614 0244 39E4      		ldi r18,lo8(0x37800000)
 615 0246 4DE1      		ldi r19,hi8(0x37800000)
 616 0248 5AE3      		ldi r20,hlo8(0x37800000)
 617 024a 0E94 0000 		ldi r21,hhi8(0x37800000)
 618 024e AB01      		call __mulsf3
 620 0252 CE01      	.LM26:
 621 0254 0E94 0000 		ldi r18,lo8(0x34c14607)
 622 0258 00C0      		ldi r19,hi8(0x34c14607)
 623               		ldi r20,hlo8(0x34c14607)
 143:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De Radianes A grados*/
 144:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=rad2grados((double)result);
 145:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 146:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case ACELERACION_TYPE:
 147:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Valor-0.5;
 624               	(0x34c14607)
 625               		call __divsf3
 626 025a CB01      		movw r20,r22
 627 025c BA01      		movw r22,r24
 628 025e 0E94 0000 		movw r24,r28
 629 0262 20E0      		call ustep2rad
 630 0264 30E0      	.L20:
 632 0268 5FE3      	.LM27:
 633 026a 0E94 0000 		call rad2grados
 148:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Data/65536.0;
 634               	pilogue start */
 636 026e 20E0      	.LM28:
 637 0270 30E0      		pop r29
 638 0272 40E8      		pop r28
 639 0274 57E3      		ret
 149:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			Data=Data/(SAMPLETIME*SAMPLETIME);
 150:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De uPasos A radianes*/
 151:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=ustep2rad(paxisSettings,(double)Data);
 641               	ep2rad
 642               	.L20:
 644 027c 36E4      	.LM27:
 645 027e 41EC      		call rad2grados
 646 0280 54E3      	.L18:
 647 0282 0E94 0000 	/* epilogue start */
 649 0288 BC01      	.LM28:
 650 028a CE01      		pop r29
 651 028c 0E94 0000 		pop r28
 652               		ret
 152:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			/*De Radianes A grados*/
 153:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=rad2grados((double)result);
 653               	sTOgradros, .-uPasosTOgradros
 654               	.Lscope7:
 657               	.global	accelerationPCtoUC
 154:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 155:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	}
 156:C:/Jarboter_V_2_1/GUI/C/conversion.c ****  
 157:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return result;
 158:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 658               	op r29
 659               		pop r28
 660 0294 DF91      		ret
 662 0298 0895      	.Lscope7:
 665               	.global	accelerationPCtoUC
 667               	accelerationPCtoUC:
 669               	.LM29:
 670               	.LFBB8:
 671               	/* prologue: function */
 672               	/* frame size = 0 */
 674               	.LM30:
 675               		ldi r18,lo8(0x3a1d4952)
 676               		ldi r19,hi8(0x3a1d4952)
 677 029a 22E5      		ldi r20,hlo8(0x3a1d4952)
 678 029c 39E4      		ldi r21,hhi8(0x3a1d4952)
 679 029e 4DE1      		call __mulsf3
 680 02a0 5AE3      		ldi r18,lo8(0x3a1d4952)
 681 02a2 0E94 0000 		ldi r19,hi8(0x3a1d4952)
 682 02a6 22E5      		ldi r20,hlo8(0x3a1d4952)
 683 02a8 39E4      		ldi r21,hhi8(0x3a1d4952)
 684 02aa 4DE1      		call __mulsf3
 685 02ac 5AE3      		ldi r18,lo8(0x47800000)
 686 02ae 0E94 0000 		ldi r19,hi8(0x47800000)
 687 02b2 20E0      		ldi r20,hlo8(0x47800000)
 688 02b4 30E0      		ldi r21,hhi8(0x47800000)
 689 02b6 40E8      		call __mulsf3
 690 02b8 57E4      		ldi r18,lo8(0x3f000000)
 691 02ba 0E94 0000 		ldi r19,hi8(0x3f000000)
 692 02be 20E0      		ldi r20,hlo8(0x3f000000)
 693 02c0 30E0      		ldi r21,hhi8(0x3f000000)
 694 02c2 40E0      		call __addsf3
 696 02c6 0E94 0000 	.LM31:
 697               		call floor
 698               		call __fixsfsi
 699 02ca 0E94 0000 		movw r18,r22
 700 02ce 0E94 0000 		movw r20,r24
 702 02d4 AC01      	.LM32:
 703               		movw r24,r20
 704               	/* epilogue start */
 705 02d6 CA01      		ret
 707 02d8 0895      	.Lscope8:
 710               	.global	velocityPCtoUC
 712               	velocityPCtoUC:
 714               	.LM33:
 715               	.LFBB9:
 716               	/* prologue: function */
 717               	/* frame size = 0 */
 719               	.LM34:
 720               		ldi r18,lo8(0x3a1d4952)
 721               		ldi r19,hi8(0x3a1d4952)
 722 02da 22E5      		ldi r20,hlo8(0x3a1d4952)
 723 02dc 39E4      		ldi r21,hhi8(0x3a1d4952)
 724 02de 4DE1      		call __mulsf3
 725 02e0 5AE3      		ldi r18,lo8(0x47800000)
 726 02e2 0E94 0000 		ldi r19,hi8(0x47800000)
 727 02e6 20E0      		ldi r20,hlo8(0x47800000)
 728 02e8 30E0      		ldi r21,hhi8(0x47800000)
 729 02ea 40E8      		call __mulsf3
 730 02ec 57E4      		ldi r18,lo8(0x3f000000)
 731 02ee 0E94 0000 		ldi r19,hi8(0x3f000000)
 732 02f2 20E0      		ldi r20,hlo8(0x3f000000)
 733 02f4 30E0      		ldi r21,hhi8(0x3f000000)
 734 02f6 40E0      		call __addsf3
 736 02fa 0E94 0000 	.LM35:
 737               		call floor
 738               		call __fixsfsi
 739 02fe 0E94 0000 		movw r18,r22
 740 0302 0E94 0000 		movw r20,r24
 742 0308 AC01      	.LM36:
 743               		movw r24,r20
 744               	/* epilogue start */
 745 030a CA01      		ret
 747 030c 0895      	.Lscope9:
 750               	.global	positionPCtoUC
 752               	positionPCtoUC:
 754               	.LM37:
 755               	.LFBB10:
 756               	/* prologue: function */
 757               	/* frame size = 0 */
 759               	.LM38:
 760               		ldi r18,lo8(0x3f000000)
 761               		ldi r19,hi8(0x3f000000)
 762 030e 20E0      		ldi r20,hlo8(0x3f000000)
 763 0310 30E0      		ldi r21,hhi8(0x3f000000)
 764 0312 40E0      		call __addsf3
 765 0314 5FE3      		call floor
 766 0316 0E94 0000 		call __fixsfsi
 767 031a 0E94 0000 		movw r18,r22
 768 031e 0E94 0000 		movw r20,r24
 770 0324 AC01      	.LM39:
 771               		movw r24,r20
 772               	/* epilogue start */
 773 0326 CA01      		ret
 775 0328 0895      	.Lscope10:
 780               	.global	gradrosTOuPasos
 782               	gradrosTOuPasos:
 784               	.LM40:
 159:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 160:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 161:C:/Jarboter_V_2_1/GUI/C/conversion.c **** int32 gradrosTOuPasos(tAxisSettings *paxisSettings,double angulo,int tipo)
 162:C:/Jarboter_V_2_1/GUI/C/conversion.c **** {
 785               	uPasos, @function
 786               	gradrosTOuPasos:
 788 032a 0F93      	.LM40:
 789 032c 1F93      	.LFBB11:
 790 032e CF93      		push r16
 791 0330 DF93      		push r17
 792               		push r28
 793               		push r29
 794 0332 8C01      	/* prologue: function */
 795 0334 E901      	/* frame size = 0 */
 163:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 164:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	double Radianes,uPasos;
 165:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	int32 result;
 166:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 
 167:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	result=-1;
 168:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 169:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	Radianes=grados2rad(angulo);
 170:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	uPasos=rad2usteps(paxisSettings,Radianes);
 796               		push r28
 797               		push r29
 798 0336 CB01      	/* prologue: function */
 799 0338 BA01      	/* frame size = 0 */
 800 033a 25E3      		movw r16,r24
 801 033c 3AEF      		movw r28,r18
 803 0340 5CE3      	.LM41:
 804 0342 0E94 0000 		movw r24,r22
 805 0346 AB01      		movw r22,r20
 806 0348 BC01      		ldi r18,lo8(0x3c8efa35)
 807 034a C801      		ldi r19,hi8(0x3c8efa35)
 808 034c 0E94 0000 		ldi r20,hlo8(0x3c8efa35)
 171:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	
 172:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	switch(tipo) 
 809               	fa35)
 810               		ldi r19,hi8(0x3c8efa35)
 811 0350 C130      		ldi r20,hlo8(0x3c8efa35)
 812 0352 D105      		ldi r21,hhi8(0x3c8efa35)
 813 0354 01F0      		call __mulsf3
 814 0356 C230      		movw r20,r22
 815 0358 D105      		movw r22,r24
 816 035a 01F0      		movw r24,r16
 817 035c CD2B      		call rad2usteps
 819 0360 2FEF      	.LM42:
 820 0362 3FEF      		cpi r28,1
 821 0364 4FEF      		cpc r29,__zero_reg__
 822 0366 5FEF      		breq .L30
 823 0368 00C0      		cpi r28,2
 824               		cpc r29,__zero_reg__
 173:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	{
 174:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case POSICION_TYPE:		
 175:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=positionPCtoUC(uPasos);  
 825               		breq .L30
 826               		cpi r28,2
 827 036a 0E94 0000 		cpc r29,__zero_reg__
 828 036e 00C0      		breq .L31
 829               		or r28,r29
 176:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 177:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case VELOCIDAD_TYPE:
 178:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=velocityPCtoUC(uPasos);  
 830               	c r29,__zero_reg__
 831               		breq .L31
 832 0370 0E94 0000 		or r28,r29
 833 0374 00C0      		breq .L29
 834               		ldi r18,lo8(-1)
 179:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 180:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		case ACELERACION_TYPE:
 181:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 			result=accelerationPCtoUC(uPasos);  
 835               		or r28,r29
 836               		breq .L29
 837 0376 0E94 0000 		ldi r18,lo8(-1)
 838               		ldi r19,hi8(-1)
 839 037a 9B01      		ldi r20,hlo8(-1)
 840 037c AC01      		ldi r21,hhi8(-1)
 841               		rjmp .L32
 182:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 		break;
 183:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	}
 184:C:/Jarboter_V_2_1/GUI/C/conversion.c ****  
 185:C:/Jarboter_V_2_1/GUI/C/conversion.c **** 	return result;
 186:C:/Jarboter_V_2_1/GUI/C/conversion.c **** }
 842               	o8(-1)
 843               		ldi r21,hhi8(-1)
 844 037e B901      		rjmp .L32
 845 0380 CA01      	.L29:
 847 0382 DF91      	.LM43:
 848 0384 CF91      		call positionPCtoUC
 849 0386 1F91      		rjmp .L34
 850 0388 0F91      	.L30:
 852               	.LM44:
 853               		call velocityPCtoUC
 854               		rjmp .L34
 855               	.L31:
 857               	.LM45:
 858               		call accelerationPCtoUC
 859               	.L34:
DEFINED SYMBOLS
                            *ABS*:00000000 conversion.c
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:2      *ABS*:0000003f __SREG__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:3      *ABS*:0000003e __SP_H__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:4      *ABS*:0000003d __SP_L__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:5      *ABS*:00000034 __CCP__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:230    .text:00000000 rad2usteps
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:339    .text:000000c8 ustep2rad
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:455    .text:000001a4 grados2rad
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:478    .text:000001b2 rad2grados
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:501    .text:000001c0 bcd2int
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:528    .text:000001d4 int2bcd
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:558    .text:000001ee uPasosTOgradros
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:669    .text:0000029a accelerationPCtoUC
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:714    .text:000002da velocityPCtoUC
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:754    .text:0000030e positionPCtoUC
C:\DOCUME~1\David\LOCALS~1\Temp/ccFhaWi1.s:784    .text:0000032a gradrosTOuPasos

UNDEFINED SYMBOLS
__floatsisf
__divsf3
__mulsf3
__addsf3
__udivmodqi4
__subsf3
floor
__fixsfsi
